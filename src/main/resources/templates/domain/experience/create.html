<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Styled Form</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/experience/ec_styles.css}">
</head>
<body>
<form th:action th:object="${experience}" method="post">
    <label for="title">제목</label>
    <input type="text" th:field="*{title}" id="title"/>

    <label for="location">위치</label>
    <input type="text" th:field="*{location}" id="location"/>

    <label for="description">내용</label>
    <input type="text" th:field="*{descriptionText}" id="description"/>

    <label for="price">가격</label>
    <input type="text" th:field="*{price}" id="price"/>

    <label for="startDate">시작날짜</label>
    <input type="date" class="form-control" id="startDate" name="startDate" onchange="updateEndDate()">

    <label for="endDate">마감날짜</label>
    <input type="date" class="form-control" id="endDate" name="endDate" disabled>

    <label for="headcount">마감인원</label>
    <input type="text" th:field="*{headcount}" id="headcount"/>

    <input type="submit" value="제출">
</form>

<script>
    function updateEndDate() {
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');

        // 시작 날짜 값 가져오기
        const startDate = startDateInput.value;

        endDateInput.disabled = false; // 시작 날짜 입력되기 전 비활성화된 마감 날짜 입력을 활성화 시킨다.
        endDateInput.min = startDate; // 마감 날짜에 시작 날짜를 넣는다.

        // 만약 마감 날짜가 선택되어 있고, 시작 날짜보다 이전이라면 마감 날짜를 초기화한다.
        if (endDateInput.value < startDate) {
            endDateInput.value = '';
        }
    }

    window.onload = function() {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('startDate').min = today;
    }

</script>

</body>
</html>