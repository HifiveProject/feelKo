<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- css -->
    <link rel="stylesheet" href="/css/template/template.css"> <!-- 문서 기본 화면 배치/기본 폰트 등 기본 설정 -->
    <link rel="stylesheet" href="/css/common/header.css">
    <link rel="stylesheet" href="/css/common/main.css">
    <link rel="stylesheet" href="/css/common/footer.css">

    <title>Feelko-template3</title>

    <script>
        // 이 페이지에서는 URL을 세션에 저장하지 않음
        var dontSave = true;
    </script>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <!-- fontAwesome -->
    <script src="https://kit.fontawesome.com/ae1a88d4e2.js" crossorigin="anonymous"></script>
    <style>
        /* 로그인 컨테이너 스타일 */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 120px); /* 헤더와 푸터의 높이를 제외한 높이 */
            margin-top: 60px; /* 헤더 높이의 절반 */
            margin-bottom: 60px; /* 푸터 높이의 절반 */
        }

        .login-box {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }

    </style>
</head>
<body class="template--body">


<!-- ----------------------------------------------- -->


<!-- Template-header 시작 -->
<th:block th:replace="domain/layout/header"> </th:block>
<!-- Template-header 끝 -->


<!-- ----------------------------------------------- -->


<!-- Template-main 시작 -->
<main class="template--main">
    <aside class="template--leftAside"></aside>
    <section class="template--Section">


        <!--         페이지 제목 시작
               <div class="template&#45;&#45;pageTitleContainer">
                   <div class="template&#45;&#45;pageTitleBox">
                    <div class="template&#45;&#45;overlayedTitle" style="color: black;">
                         <a href="https://www.naver.com">
                               여기다가 재목부분이나 보고 쓰시면 됩니다. 안쓰셔두 되구 편하실대로 !
                          </a>
                       </div>
                  </div>
               </div>
               페이지 제목 끝 -->


        <!-- 콘텐츠 시작 -->
        <div class="login-container">
            <div class="login-box">
                <form method="POST" onsubmit="return submitLoginForm(event);" class="form-container">
                    <div class="mb-3">
                        <label for="emailInput" class="form-label">
                            사용자(email)    <i class="fa-solid fa-asterisk" style="color: red;"></i>
                        </label>
                        <input type="email" class="form-control" id="emailInput" name="email" onfocus="showDefaultMessage('email')">
                        <!-- 기본 안내 메시지 -->
                        <div id="emailDefault" class="form-text">
                            예시: yourname@example.com
                        </div>
                        <!-- 에러 메시지 -->
                        <div id="emailError" class="form-text" style="color: red; display: none;">
                            올바른 이메일 형식이 아닙니다. 다시 확인해 주세요.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="passwordInput" class="form-label">
                            비밀번호    <i class="fa-solid fa-asterisk" style="color: red;"></i>
                        </label>
                        <input type="password" class="form-control" id="passwordInput" name="password">
                        <div id="passwordError" class="form-text" style="color: red; display: none;">
                            비밀번호를 입력해 주세요.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="nameInput" class="form-label">
                            이름    <i class="fa-solid fa-asterisk" style="color: red;"></i>
                        </label>
                        <input type="text" class="form-control" id="nameInput" name="name">
                        <div id="nameError" class="form-text" style="color: red; display: none;">
                            이름을 입력해 주세요.
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="profileInput" class="form-label">프로필(URL)</label>
                        <input type="text" class="form-control" id="profileInput" name="profile">
                    </div>

                    <div class="mb-3">
                        <label for="phoneInput" class="form-label">
                            전화번호    <i class="fa-solid fa-asterisk" style="color: red;"></i>
                        </label>
                        <input type="tel" class="form-control" id="phoneInput" name="phone" onfocus="showDefaultMessage('phone')">
                        <!-- 기본 안내 메시지 -->
                        <div id="phoneDefault" class="form-text">
                            예시: 010-1234-5678
                        </div>
                        <!-- 에러 메시지 -->
                        <div id="phoneError" class="form-text" style="color: red; display: none;">
                            올바른 전화번호 형식이 아닙니다. 예시: 010-1234-5678
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="birthdayInput" class="form-label">생년월일</label>
                        <input type="date" class="form-control" id="birthdayInput" name="birthday">
                    </div>

                    <button type="submit" class="btn" style="background-color: #6c757d; color: white;">회원가입</button>
                </form>
            </div>
        </div>
        <!-- 콘텐츠 끝 -->


    </section>
    <aside class="template--rightAside"></aside>
</main>
<!-- Template-main 끝 -->


<!-- ----------------------------------------------- -->


<!-- Template-footer 시작 -->
<th:block th:replace="domain/layout/footer"> </th:block>
<!-- Template-footer 끝 -->


<!-- ----------------------------------------------- -->


<!-- bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
<!-- js -->
<script src="/js/common/header.js"></script>
<script src="/js/common/main.js"></script>
<script src="/js/common/footer.js"></script>

<script>
    var phoneValidationFailed = false;
    var emailValidationFailed = false;

    function showDefaultMessage(field) {
        // 유효성 검사에 실패한 적이 없으면 기본 메시지 출력
        if (field === 'phone' && !phoneValidationFailed) {
            document.getElementById(field + 'Default').style.display = 'block';
            document.getElementById(field + 'Error').style.display = 'none';
        } else if (field === 'email' && !emailValidationFailed) {
            document.getElementById(field + 'Default').style.display = 'block';
            document.getElementById(field + 'Error').style.display = 'none';
        }
    }

    function submitLoginForm(event){
        var isValid = true; // 폼 유효성 기본값

        // 이메일 유효성 검사
        var emailInput = document.getElementById('emailInput');
        var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(emailInput.value)) {
            // 유효성 검사 실패
            document.getElementById('emailError').style.display = 'block';
            document.getElementById('emailDefault').style.display = 'none'; // 기본 메시지 숨기기
            emailValidationFailed = true; // 유효성 검사 실패 처리
            isValid = false;
        } else {
            // 유효성 검사에 성공하면 기본 메시지를 숨깁니다(이미 에러가 발생했었다면).
            document.getElementById('emailError').style.display = 'none';
            if (!emailValidationFailed) {
                // 에러가 한 번도 발생하지 않았다면 기본 메시지를 계속 보여줍니다.
                document.getElementById('emailDefault').style.display = 'block';
            }
        }

        // 전화번호 유효성 검사
        var phoneInput = document.getElementById('phoneInput');
        var phonePattern = /^[0-9]{3}-[0-9]{4}-[0-9]{4}$/;
        if (!phonePattern.test(phoneInput.value)) {
            // 유효성 검사 실패
            document.getElementById('phoneError').style.display = 'block';
            document.getElementById('phoneDefault').style.display = 'none'; // 기본 메시지 숨기기
            phoneValidationFailed = true; // 유효성 검사 실패 처리
            isValid = false;
        } else {
            // 유효성 검사에 성공하면 기본 메시지를 숨깁니다(이미 에러가 발생했었다면).
            document.getElementById('phoneError').style.display = 'none';
            if (!phoneValidationFailed) {
                // 에러가 한 번도 발생하지 않았다면 기본 메시지를 계속 보여줍니다.
                document.getElementById('phoneDefault').style.display = 'block';
            }
        }

        // 이름 필드 공백 검사
        var nameInput = document.getElementById('nameInput');
        if (!nameInput.value.trim()) {
            document.getElementById('nameError').style.display = 'block';
            isValid = false; // 유효하지 않다면 false
        } else {
            document.getElementById('nameError').style.display = 'none';
        }

        // 비밀번호 필드 공백 검사
        var passwordInput = document.getElementById('passwordInput');
        if (!passwordInput.value.trim()) {
            document.getElementById('passwordError').style.display = 'block';
            isValid = false; // 유효하지 않다면 false
        } else {
            document.getElementById('passwordError').style.display = 'none';
        }

        // 유효하지 않은 입력이 있으면 폼 제출 방지
        if (!isValid) {
            event.preventDefault(); // 폼 제출 방지
            alert('입력 형식을 확인해 주세요.');
            return false; // onsubmit return false 반환
        }
        return true;
    }
</script>


</body>
</html>